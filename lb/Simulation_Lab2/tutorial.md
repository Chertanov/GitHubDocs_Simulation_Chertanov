# Імітаційне моделювання комп'ютерних систем
## Лабораторная работа №2. Редактирование имитационных моделей в среде NetLogo

<br>

### 2.1 Цель работы
Получить представление о синтаксисе и возможностях языка мультиагентного моделирования NetLogo.
Научиться вносить изменения в исходный код готовых моделей из разных предметных областей, предлагаемыми средой мультиагентного моделирования NetLogo.

<br>

### 2.2 Описание лабораторной установки
Для выполнения лабораторной работы потребуется:
- свободная среда мультиагентного моделирование **NetLogo**. Возможно использование в браузере **веб-версии** данного инструмента, но в случае внесения изменений в интерфейс управления моделированием потребуется работа с десктопной версией.
- для описания работы используется файл в формате **md**, размещаемый в составе репозитория лабораторной на сервисе GitHub. *Для удобства локальной работы с md-разметкой можно использовать редакторы кода, такие как MS Visual Studio Code или любой другой, знакомый пользователю. В случае локальной работы по подготовке md-файла, потребуется установленная СКВ Git.*
- для работы с веб-версией NetLogo и сервисом GitHub потребуется доступ к сети Internet.

<br>

### 2.3 Порядок выполнения работы
При выборе модели для редактирования её логики доступны три пути **на свой выбор**:
1. Вносить коррективы в логику той модели, которую ранее выбирали, анализировали, описали и использовали в ходе выполнения лабораторной, посвященной [описанию имитационных моделей](..\Simulation_Lab1\tutorial.md). **Предполагаемые направления изменений логики обязательно согласуются** с преподавателем. Это необходимо для того, чтобы объём изменений был достаточен, но не чрезмерен.
2. Вносить коррективы в одну из моделей, **предложеных в списке в пункте 2.4**. Список необходимых и достаточных изменений там указан, однако, данный путь предполагает необходимость **описания модели** (аналогично тому, как делали в лабораторной, посвященной [описанию имитационных моделей](..\Simulation_Lab1\tutorial.md). Воизбежание одновременного выбора одного и того же варианта несколькими студентами, свой выбор варианта **обязательно зафиксируйте** в [гугл-документе с общим доступом](https://docs.google.com/spreadsheets/d/1qpwpdv9j_9LmdFnWsEiEt_Qec-cPVk6LviXC2GWig-Y/edit).
3. Внесение **правок по своему выбору в модель по своему выбору**. Выбранная модель указывается в [гугл-документе с общим доступом](https://docs.google.com/spreadsheets/d/1qpwpdv9j_9LmdFnWsEiEt_Qec-cPVk6LviXC2GWig-Y/edit), правки **обязательно согласуются** с преподавателем. Этот путь также предполагает необходимость **описания модели** (аналогично тому, как делали в лабораторной, посвященной [описанию имитационных моделей](..\Simulation_Lab1\tutorial.md)).


*Дополнительный вариант пути выполнения лабораторной работы*. **Создание** (а не просто редактирование) и **описание** модели, **не опираясь на предлагаемые средой NetLogo**, а путём написания **собственной** программы (включая модель и визуализацию её использования) на одном из знакомых языковых средств. Однако, такой путь явно сложнее, поэтому предполагает как **согласование** с преподавателем, так и более высокую оценку за данную работу: вместо 12-18 баллов за эту лабораторную - или **30 баллов** (при условии использования браузерного JavaScript или C#/WinForms), или **25 баллов** (при использовании любых других средств программирования).

<br>

### 2.4 Варианты заданий
Этот пункт методических указаний имеет смысл **только при выборе пути №2** в пункте 2.3 порядка выполнения работы. В таблице перечислены предлагаемые модели и дано их неформальной описание, для общего представления. После таблицы - список вариантов, в которых описаны наборы необходимых изменений. 

<table width="100%">
<caption>Общее описание предлагаемых моделей</caption>
    <thead>
        <tr>
            <th>Модель</th>
            <th>Неформальное описание</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <a href="http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Rabbits%20Grass%20Weeds.nlogo">Rabbits Grass Weeds</a>
            </td>
            <td>
                Модель лужайки с кроликами, которые пасутся на кормовой травке (и сорняках). Когда достаточно наелись - размножаются.
            </td>
        </tr>
        <tr>
            <td>
                <a href="http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Evolution/Wolf%20Sheep%20Stride%20Inheritance.nlogo">Wolf Sheep Stride Inheritance</a>
            </td>
            <td>
                Простой вариант классичееской модели "хищник/жертва", в котором овцы поедают траву, волки поедают овец. Волки и овцы перемещаются по полю случайным образом, но каждый со своей скоростью, которая является наследуемым признаком.
            </td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>

На основе модели [Rabbits Grass Weeds](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Rabbits%20Grass%20Weeds.nlogo) доступны такие варианты:

**Rabbits-1**:
1. Добавление агентов-хищников, случайным образом перемещающихся по полю и поедающих кроликов при контакте с ними (если оказывается на той же клетке). Число хищников указывается пользователем через интерфейс среды моделирования. ВМЕСТО указания числа хищников пользователем при инициализации, возможна реализация направленного движения единственного хищника на поле: после "осмотра" в радиусе 5 клеток перемещение будет в том направлении, в котором найден кролик, либо в случайном, если добычи не обнаружено.
1. Кролики перемещаются случайным образом, но не в направлении хищника. Окружающая местность "просматривается" кроликом в радиусе 3 клеток, если в выбранном случайном направлении движения есть хищник - ищется новое случайное направление. Если двигаться некуда - стоять на месте.
<!-- охота только в случае голода -->
<!-- расстановка хищников только в такое место, где он не будет съедать кого-то сразу. -->

**Rabbits-2**: 
1. Исправить ошибку с возможностью находиться в одном участке более чем одному кролику.
1. Добавить вероятность отравиться при поедании сорняков. Заболевший кролик помечается другим цветом и остаётся заболевшим 3 такта модельного времени.
2. Появление новых кроликов должно требовать не только сытости, но и здоровья, и присутствия в одной из соседних клеток другого сытого здорового кролика. Появление происходит с вероятностью 50%.

**Rabbits-3**:
1. Исправить ошибку с возможностью находиться в одном участке более чем одному кролику.
1. Добавление на поле в случайном месте "ловушек". Число ловушек указывается пользователем.
2. При попадании в "ловушку" кролик исчезает и инкрементируется счётчик пойманных кроликов, который отображается пользователю.

На основе модели [Wolf Sheep Stride Inheritance](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Evolution/Wolf%20Sheep%20Stride%20Inheritance.nlogo) доступны такие варианты:

**WolfSheep-1**:
1. Разграничить овец и волков на самцов и самок. Распределение при инициализации симуляции должно указываться пользователем. Скорректировать логику появления новых овец и волков - только вероятности и "сытости" явно недостаточно для адекватности модели.
1. Выводить данные о составе стада и стае, с отображением графиков изменения количества агентов.

**WolfSheep-2**:
2. Заменить волков - тиграми. Перед началом своего хода "осматриваются", направление движения выбирается исходя из наличия овец и отсутствия других тигров. Смотрят на заданное пользователем число клеток вперёд.
2. Овцы перемещаются случайным образом, но при обнаружении тигра на одной из клеток в радиусе (заданном пользователем), меняют направление на противоположное исходному.
2. Предусмотреть "безопасное пастбище" для овец - область поля, в которой овцы не могут быть съедены тиграми. Проверять при инициализации, чтобы там не оказывались тигры.

**WolfSheep-3**:
3. Предусмотреть "загон" для овец. Это область, в которую (при наличии там места) могут попасть овцы. Волки по умолчаниюю находятся вне загона, туда могут попасть только в ходе симуляции, с учётом указанной пользователем вероятности. Вести счётчик овец в загоне и выводить пользователю.
// можно добавлять откючаемую взможность появляться только в загоне.
3. Предусмотреть меру "сытости" для волков. Использовать указываемое пользователем процентное значение сытости, при котором волк не будет поедать овец.

### 1.5 Содержание отчета
Наличие отчета не является необходимым. Его функции выполняет **md-описание** работы (которое и так необходимо для отработки), подготовленное в соответствии с пунктом 4 раздела 1.3 и выложеное на сервисе GitHub. Для ориентировки можно использовать [пример](example.md).
<br>
<pre>
to slow-down-car [ car-ahead car-ahead-2 ] ;; turtle procedure
  if (car-ahead = nobody) and (car-ahead-2 != nobody) [
    let speed-car-ahead-2 [ speed ] of car-ahead-2
    let speed-difference-ahead-2 abs speed - speed-car-ahead-2
    set speed speed - speed-difference-ahead-2 / 2
  ]
  if (car-ahead != nobody) [
    ifelse (car-ahead-2 != nobody) [ 
      set heading 180
      fd 1
      set heading 90
    ]
    [ 
      ;; slow down so you are driving more slowly than the car ahead of you
      let speed-car-ahead [ speed ] of car-ahead
      set speed speed-car-ahead - deceleration
    ]
  ]
end
</pre>
### 1.6 Контрольные вопросы
1. Что такое моделирование? В чём разница между моделированием и симуляцией?
2. Каковы задачи моделирования?
3. В чём разница между объектом и системой?
4. В чём заключается негативная обратная связь?
5. Что означает адекватность модели?
6. Виды моделей.
7. Как описывается аналитическая модель?
8. Что такое "состояние" модели?
9. Особенности имитационных моделей.
10. Что такое концептуальная модель?
11. Каковы этапы моделирования?
12. В чём разница между индуктивным и дедуктивным подходами моделирования систем?
13. Что такое модельное время?

<br>

### СПИСОК ЛИТЕРАТУРЫ
1. Среда моделирования [NetLogo](http://ccl.northwestern.edu/netlogo/).
1. Руководства по разметке Markdown: [1](https://gist.github.com/Jekins/2bf2d0638163f1294637), [2](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet), [3](https://www.markdownguide.org/basic-syntax/).
<!-- 
Есть много литературы по моделирвоанию, но её всё равно никто не читает - для теорматериала есть лекционный курс с многократным пережёвыванием нужной формальной теории.
На всякий случай (и как подборка для будущих формальных работ), собираю уместные источники здесь:

https://core.hash.ai, веб-среда для разработчиков и средство просмотра симуляций. Вот тут - https://habr.com/ru/company/skillfactory/blog/509834/ - хорошее бла-бла по этому поводу.

Комп'ютерне моделювання систем та процесів. Методи обчислень / [Р.Н. Квєтний, І.В. Богач, О.Р. Бойко та ін.]. – Вінниц. нац. техн. ун-т. Ч.1, 2013. – 234 с.

Anylogic [Електронний ресурс] / Anylogic – Режим доступу: http://www.anylogic.ru/multimethod-modeling

Самарский А.А., Михайлов А.П. Математическое моделирование: Идеи. Методы. Примеры 2-е изд., испр. – М.: Физматлит, 2002. – 320 с.

Введение в математическое моделирование. Под ред. П.В. Трусова, В Н. Ашихмина и др. - М.: Логос, 2005. - 440 с. 

Советов Б.Я., Яковлев С.А. Моделирование систем. Учебное пособие. 7-е изд. – М.: Изд-во «Юрайт», 2012. – 343с.

Советов Б.Я., Яковлев С.А. Моделирование систем. Практикум. – М.: Изд-во «Юрайт», 2012. – 296с.

Чикуров Н.Г. Моделирование технических систем. Учебное пособие. – Уфа: УГАТУ, 2009. - 357 с.

Алиев Т.И. Основы моделирования дискретных систем. - СПб: СПбГУ ИТМО, 2009.

Лоу А.М., Кельтон В.Д. Имитационное моделирование. – СПб.: Питер, 2004. – 847с.

Кирьянов Б.Ф. Математическое моделирование. – Великий Новгород: НовГУ, 2006. – 35с.

Емельянов В.В., Ясиновский С.И. Имитационное моделирование систем: Учеб.пособие. - М.: Изд-во МГТУ им. Н.Э. Баумана, 2009.- 584 с.

Рыжиков Ю.И. Имитационное моделирование: Теория и технологии. - СПб.: КОРОНА принт , 2004. - 384 с.

 -->
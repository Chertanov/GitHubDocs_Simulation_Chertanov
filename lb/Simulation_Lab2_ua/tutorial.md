# Імітаційне моделювання комп'ютерних систем
## Лабораторна робота №2. Редагування імітаційних моделей у середовищі NetLogo

<br>

### 2.1 Мета роботи
Отримати уявлення про синтаксис та можливості мови мультиагентного імітаційного моделювання NetLogo.  
Навчитися вносити зміни до вихідного коду готових моделей з різних предметних областей, які пропонуються середовищем NetLogo.

<br>

### 2.2 Необхідні засоби
Для виконання лабораторної роботи знадобиться:
- відкрите середовище мультиагентного моделювання **NetLogo**. Можливе використання у браузері **веб-версії** даного інструменту, але у разі внесення змін до інтерфейсу управління моделюванням буде потрібна робота з десктопною версією.
- для опису роботи використовується файл у форматі **md**, що розміщується у складі репозиторію лабораторної роботи на сервісі GitHub. *Для зручності локальної роботи з md-розміткою доцільно використовувати редактори коду, такі як MS Visual Studio Code або будь-який інший, знайомий користувачеві. У разі локальної роботи з підготовки md-файлу, знадобиться встановлена СКВ Git.*
- для роботи з веб-версією NetLogo та сервісом GitHub буде потрібно доступ до мережі Інтернет.

<br>

### 2.3 Порядок виконання роботи
Пам'ятайте, що реалізація змін не повинна порушувати загальну логіку моделі та призводити до її неадекватності об'єкту імітаційного моделювання.  
При виборі моделі для редагування її логіки студентам доступні три шляхи **на свій вибір**:
1. Вносити корективи до логіки тієї моделі, яку раніше вибирали, аналізували, описали та використовували під час виконання лабораторної, присвяченої [опису імітаційних моделей](..\Simulation_Lab1_ua\tutorial.md). **Напрями зміни логіки моделі обов'язково узгоджуються** з викладачем. Це необхідно для того, щоб обсяг майбутніх змін був достатнім, але не надмірним для лабораторної роботи.
2. Вносити корективи в одну з моделей **з переліку запропонованих у пункті 2.4**. Описи необхідних та достатніх змін для них вказані у варіантах, однак, цей шлях передбачає необхідність **опису моделі** (аналогічно тому, як робили в лабораторній, присвяченій [опису імітаційних моделей](..\Simulation_Lab1_ua\tutorial.md). Щоб уникнути одночасного вибору одного й того ж варіанта більшою кількістю студентів, ніж це допустимо за умовами варіанта, свій вибір **обов'язково зафіксуйте** у [відкритому гугл-документі](https://docs.google.com/spreadsheets/d/1qpwpdv9j_9LmdFnWsEiEt_Qec-cPVk6LviXC2GWig-Y/edit).
3. Внесення **правок на свій вибір у модель на свій вибір**. Вибрана модель вказується у [відкритому гугл-документі](https://docs.google.com/spreadsheets/d/1qpwpdv9j_9LmdFnWsEiEt_Qec-cPVk6LviXC2GWig-Y/edit), правки **обов'язково узгоджуються** з викладачем. Цей шлях також передбачає необхідність **опису моделі** (аналогічно тому, як робили в лабораторній, присвяченій [опису імітаційних моделей](..\Simulation_Lab1_ua\tutorial.md)).


*Додаткова можливість виконання лабораторної роботи*. **Створення** (а не просто редагування) та **опис** моделі, **не спираючись на запропоноване середовищем NetLogo**, а шляхом написання **власної** програми (включаючи модель та візуалізацію її використання) на одному із знайомих мовних засобів. Однак такий шлях значно складніший, тому передбачає як попереднє **узгодження** з викладачем, так і суттєво вищу оцінку за дану роботу: замість 12-18 балів за цю лабораторну - або **30 балів** (за умови використання браузерного JavaScript або C#/WinForms), або **25 балів** (при використанні інших засобів програмування).

<br>

### 2.4 Варіанти завдань
Цей пункт методичних вказівок **має сенс лише при виборі шляху №2** у пункті 2.3 порядку виконання роботи. У таблиці перераховані пропоновані моделі та дано їх неформальний опис, для загального уявлення. Після таблиці – список варіантів, в яких описані набори необхідних змін. Варіанти індивідуальні, якщо не вказано інше.

<table width="100%">
<caption>Загальний опис запропонованих моделей</caption>
    <thead>
        <tr>
            <th>Модель</th>
            <th>Неформальний опис</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <a href="http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Rabbits%20Grass%20Weeds.nlogo">Rabbits Grass Weeds</a>
            </td>
            <td>
                Модель лужка з кроликами, які пасуться на кормовій траві (і бур'янах). Коли достатньо наїлися – розмножуються.
            </td>
        </tr>
        <tr>
            <td>
                <a href="http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Evolution/Wolf%20Sheep%20Stride%20Inheritance.nlogo">Wolf Sheep Stride Inheritance</a>
            </td>
            <td>
                Простий варіант класичної моделі "хижак/жертва", в якому вівці поїдають траву, вовки поїдають овець. Вовки та вівці переміщаються по полю випадковим чином, але кожен зі своєю швидкістю, яка є успадкованою ознакою.
            </td>
        </tr>
        <tr>
            <td>
                <a href="http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Curricular%20Models/BEAGLE%20Evolution/Red%20Queen.nlogo">Red Queen</a>
            </td>
            <td>
                Модель спільної еволюції жаб та змій. Змії харчуються жабами, але жаби отруйні. Виживають ті змії, у яких достатня стійкість до отрути жаби, що з'їдається. Але й у жаб отрути може бути більше. "Отрутність" і "стійкість до отрути" є успадкованими ознаками. <!-- Как они изменятся в популяции спустя некоторое время? И кто в итоге останется - змеи или гадюки?.. Жабы с гадюками - кто кого?.. -->
            </td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>

На основі моделі [Rabbits Grass Weeds](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Rabbits%20Grass%20Weeds.nlogo) доступні такі варіанти:

**Rabbits-1**, варіант на 2 студентів:
1. Додавання агентів-хижаків, що випадково переміщаються по полю і поїдають кроликів при контакті з ними (якщо опиняються на тій же клітині). Число хижаків вказується користувачем через інтерфейс середовища моделювання.
1. Хижаки мають міру "ситості". Голодний вмирає. Ситий полює знову. Той, хто надто наївся - стоїть на місці. Значення для ситості та пересичення задається користувачем. Ситість знижується у міру проходження модельного часу. Швидкість "переварювання" задається користувачем.
1. Кролики переміщаються випадковим чином у певному куті перед собою (як це реалізовано спочатку), але не в напрямку хижака. Якщо у вибраному напрямку руху є хижак – шукається новий випадковий напрямок, подалі від хижака. Якщо рухатися нікуди – стояти на місці.
<!-- ВМЕСТО указания числа хищников пользователем при инициализации, возможна реализация направленного движения единственного хищника на поле: после "осмотра" в радиусе 5 клеток перемещение будет в том направлении, в котором найден кролик, либо в случайном, если добычи не обнаружено. -->
<!-- охота только в случае голода -->
<!-- расстановка хищников только в такое место, где он не будет съедать кого-то сразу. -->
<!-- возможность прыжков хищника по нескольку за один такт, в случайные места на лужайке -->

**Rabbits-2**, вариант на 2 человек: 
1. Прибрати можливість знаходитися в одній ділянці одночасно більш ніж одному кролику.
2. Додати можливість отруїтися при поїданні бур'янів. Захворілий кролик не може харчуватися, переміщатися і розмножуватися, позначається іншим кольором і залишається хворим на 3 такти модельного часу.
3. Поява нових кроликів має вимагати не тільки ситості, а й здоров'я, та присутності в одній із сусідніх клітин іншого ситого здорового кролика. Поява потомства відбувається із ймовірністю 50%.
1. Додати на поле у випадковому місці "пастки". Кількість пасток вказується користувачем. При попаданні в пастку кролик зникає і інкрементується лічильник спійманих кроликів, який відображається користувачеві.

<!-- **Rabbits-3**:
1. Исправить ошибку с возможностью находиться в одном участке более чем одному кролику. -->

На основі моделі [Wolf Sheep Stride Inheritance](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Evolution/Wolf%20Sheep%20Stride%20Inheritance.nlogo) доступні такі варіанти:

**WolfSheep-1**:
1. Розмежувати овець і вовків на самців та самок. Розподіл під час ініціалізації симуляції має вказуватися користувачем. Скоригувати логіку появи нових овець та вовків - тільки ймовірності та умови "ситості" недостатньо для забезпечення адекватності моделі.
1. Виводити користувачеві дані про склад стада та зграї, з відображенням графіків зміни кількості агентів.

**WolfSheep-2**:
1. Замінити вовків – тиграми. Перед початком свого ходу тигри "оглядаються", напрямок руху вибирається виходячи з наявності овець та відсутності інших тигрів. Якщо немає іншої можливості – переміщається випадково. При знаходженні на одній ділянці поля двох тигрів залишається лише один з них. <!-- Смотрят на заданное пользователем число клеток вперёд. -->
2. Вівці переміщаються випадковим чином, але при виявленні тигра на одній із клітин поруч змінюють напрямок на протилежний.
<!-- 3. Предусмотреть "безопасное пастбище" для овец - область поля, в которой овцы не могут быть съедены тиграми. Проверять при инициализации, чтобы там не оказывались тигры. -->

**WolfSheep-3**:  
1. Передбачити огорожену область ("загін") для овець. Це область, в яку (за наявності вільних ділянок) можуть потрапити вівці, якщо випадково туди забредуть. Вовки спочатку знаходяться поза загоном, туди можуть потрапити тільки в ході симуляції, з урахуванням зазначеної користувачем ймовірності. Вести лічильник овець у загоні та виводити користувачеві. Відображати графік зміни кількості овець у загоні.
1. Передбачити міру "ситості" для вовків. Використовувати вказане користувачем відсоткове значення ситості, при якому вовк не поїдатиме овець.
<!-- // можно добавлять отключаемую взможность появляться только в загоне. -->

На основі моделі [Red Queen](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Curricular%20Models/BEAGLE%20Evolution/Red%20Queen.nlogo) доступні такі варіанти:

**FrogSnake-1**   
1. Ввести поняття "віку" жаб та змій. Під час ініціалізації використовувати випадкове значення. Максимальний вік вказується користувачем, після досягнення максимального віку, особина гине.
1. Збільшувати кількість отрути жаб у міру їхнього "дорослішання". Швидкість зростання кількості отрути задається користувачем. Збільшувати опір змій до отрути в міру її "дорослішання". Швидкість зростання стійкості задається користувачем.
1. Розділити особин на самців та самок. Для розмноження необхідно перебувати на одній ділянці з іншим представником свого виду іншої статі. Опірність та стійкість успадковується від батьків найбільша.

**FrogSnake-2** 
1. Збільшувати стійкість змії до отрути при успішному поїданні жаби.
1. Зменшувати отруйність жаби після невдалої (для змії) спроби з'їсти її. Отруйність відновлюється до вихідної у міру зміни тактів модельного часу.
1. Після успішного з'їдання отруйної жаби, змія не рухається деяку кількість тактів модельного часу, залежно від співвідношення отрути з'їденої жаби та власної стійкості на момент поїдання.

<!-- **FrogSnake-3**  
0. Перемещение змей и лягушек учитывает окружение. Лягушка првоеряет пространство вокруг себя и перемещается в направлении, противоположное обнаруженной змее, либо случайно вперёд, если змей не обнаружено. -->


### 2.5 Зміст звіту
Наявність звіту не є необхідною. Його функції виконує **md-опис** роботи (який і так необхідний для відпрацювання), підготовлений та викладений на сервісі GitHub. Для орієнтування можна використовувати [приклад](example.md).
<br>

### 2.6 Контрольні запитання
1. Які підходи у рамках імітаційного моделювання вам відомі?
1. Види агентів у середовищі NetLogo. *// далі всі питання - у контексті синтаксису середовища мультиагентного моделювання NetLogo.*
1. Як створити процедуру та функцію?
1. Як встановити значення змінної?
1. Що таке turtles-own?
1. Навіщо використовується конструкція ask?
1. Як створити активних агентів? Які їх властивості доступні на початковому етапі?
1. Як створити різнорідних активних агентів?
1. Навіщо використовується конструкція hatch?
1. Які команди використовують для переміщення агентів?
1. Як видалити агента з поля?
1. У чому різниця між random-pxcor та random-xcor?
1. Як визначити наявність агента в ділянці поля за курсом руху агента?
1. Як отримати випадкове число у заданому діапазоні?
1. Як вивести користувачеві поточну кількість активних агентів на полі?
1. Як відбувається перехід до наступного такту модельного часу?



<br>

### Корисні посилання
1. Середовище моделювання [NetLogo](http://ccl.northwestern.edu/netlogo/).
1. [NetLogo Models Library](http://ccl.northwestern.edu/netlogo/models/index.cgi) - бібліотека готових імітаційних моделей, корисна для ознайомлення на тему "як можна зробити". Доступні через десктопну версію, так і через NetLogo Web.
1. [NetLogo programming language in detail](http://ccl.northwestern.edu/netlogo/docs/programming.html#programming-guide)
1. [Beginner's Guide to NetLogo Programming](https://ccl.northwestern.edu/netlogo/bind/)
1. Посібники з розмітки Markdown: [1](https://gist.github.com/Jekins/2bf2d0638163f1294637), [2](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet), [3](https://www.markdownguide.org/basic-syntax/).
<!-- Литература по собственно моделированию здесь не нужна - вторая лаба сугубо прикладная, тут нужны указанные источники по NetLogo. И они указаны не зря! -->